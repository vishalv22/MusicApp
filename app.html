<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Player</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="titlebar">
        <div class="titlebar-drag-region">
            <button id="slidePanelBtn" class="slide-panel-btn" title="Toggle Side Panel"><img src="icons/panel.png"></button>
            <button id="settingsBtn" class="slide-panel-btn" title="Settings" style="margin-left: 4px;"><img src="icons/setting.png"></button>
        </div>
        <div class="titlebar-center">
            <div class="titlebar-controls">
                <div class="search-container">
                    <input type="text" id="searchInput" placeholder="Search here..." class="titlebar-search">
                    <img src="icons/search.png" class="search-icon">
                </div>
                <button id="refreshBtn" class="titlebar-btn" title="Refresh Music Library"><img src="icons/refresh.png"></button>
                <button id="themeToggle" class="titlebar-btn" title="Toggle Theme"><img src="icons/night.png"></button>
            </div>
        </div>
        <div class="window-controls">
            <button class="window-control minimize" onclick="minimize()" title="Minimize">
                <img src="icons/minimize.png">
            </button>
            <button class="window-control maximize" onclick="maximize()" title="Maximize">
                <img src="icons/maximize.png">
            </button>
            <button class="window-control restore" onclick="maximize()" title="Restore" style="display: none;">
                <img src="icons/restore.png">
            </button>
            <button class="window-control close" onclick="closeApp()" title="Close">
                <img src="icons/close.png">
            </button>
        </div>
    </div>

    <div class="app">
        <div class="main-content">
            <div class="slide-panel" id="slidePanel">
                <div class="slide-panel-content">
                    <div class="dropdown-container">
                        <button class="panel-action-btn" id="categorySelector">
                            <span id="selectedCategory"><img src="icons/all-song.png"> All Songs</span>
                            <img src="icons/shortby.png" class="dropdown-arrow">
                        </button>
                        <div class="dropdown-menu" id="categoryDropdown">
                            <div class="dropdown-item" data-category="all"><img src="icons/all-song.png"> All Songs</div>
                            <div class="dropdown-item" data-category="recent"><img src="icons/clock.png"> Recently Added</div>
                            <div class="dropdown-item" data-category="video"><img src="icons/video-songs.png"> Video Songs</div>
                            <div class="dropdown-item" data-category="rated"><img src="icons/star-songs.png"> Rated Songs</div>
                        </div>
                    </div>
                    <button class="panel-action-btn" id="viewStorageFolderBtn"><img src="icons/folder.png"> View in Folder</button>
                    <button class="panel-action-btn" id="addMusicFilesBtn"><img src="icons/add.png"> Add Music Files</button>
                    <button class="panel-action-btn" id="downloadMusicBtn"><img src="icons/download.png"> Download Music</button>
                    <div class="panel-divider"></div>
                    <h3 class="panel-heading">Playlists</h3>
                    <div class="playlist-input-container" id="playlistInputContainer" style="display: none;">
                        <input type="text" id="playlistNameInput" class="playlist-name-input" placeholder="Enter playlist name...">
                    </div>
                    <div class="playlist-list" id="playlistList"></div>
                    <button class="panel-action-btn" id="createPlaylistBtn"><img src="icons/add.png"> Create Playlist</button>
                </div>
            </div>
            <div class="left-panel" id="leftPanel">
                <div class="settings-panel" id="settingsPanel" style="display: none;">
                    <div class="settings-header">
                        <div class="settings-tabs">
                            <button class="settings-tab active" data-tab="basics">Basics</button>
                            <button class="settings-tab" data-tab="equalizer">Equalizer</button>
                            <button class="settings-tab" data-tab="appearance">Appearance</button>
                            <button class="settings-tab" data-tab="features">Features and Use</button>
                            <button class="settings-tab" data-tab="about">About</button>
                        </div>
                    </div>
                    <div class="settings-content">
                        <div class="settings-tab-content active" id="basics-content">
                            <h3>Playback Settings</h3>
                            <div class="setting-item">
                                <label for="crossfadeSlider">Crossfade duration</label>
                                <div class="slider-container">
                                    <input type="range" id="crossfadeSlider" min="0" max="10" value="0" step="0.1">
                                    <span id="crossfadeValue">0 sec</span>
                                </div>
                            </div>
                            <div class="setting-item">
                                <label for="gaplessToggle">Gapless Playback</label>
                                <input type="checkbox" id="gaplessToggle" class="toggle-switch">
                            </div>
                            
                            <h3>Audio Settings</h3>
                            <div class="setting-item">
                                <label>Output device</label>
                                <div class="custom-dropdown" id="outputDevice">
                                    <div class="dropdown-selected">Default</div>
                                    <div class="dropdown-options">
                                        <div class="dropdown-option" data-value="default">Default</div>
                                        <div class="dropdown-option" data-value="speakers">Speakers</div>
                                        <div class="dropdown-option" data-value="headphones">Headphones</div>
                                        <div class="dropdown-option" data-value="bluetooth">Bluetooth devices</div>
                                    </div>
                                </div>
                            </div>
                            <div class="setting-item">
                                <label>Audio quality</label>
                                <div class="custom-dropdown" id="audioQuality">
                                    <div class="dropdown-selected">High</div>
                                    <div class="dropdown-options">
                                        <div class="dropdown-option" data-value="low">Low</div>
                                        <div class="dropdown-option" data-value="medium">Medium</div>
                                        <div class="dropdown-option" data-value="high">High</div>
                                        <div class="dropdown-option" data-value="lossless">Lossless</div>
                                    </div>
                                </div>
                            </div>
                            <div class="setting-item">
                                <label for="volumeNormalization">Volume normalization</label>
                                <input type="checkbox" id="volumeNormalization" class="toggle-switch">
                            </div>
                            
                            <h3>General Settings</h3>
                            <div class="setting-item">
                                <label>Language</label>
                                <div class="custom-dropdown" id="language">
                                    <div class="dropdown-selected">English</div>
                                    <div class="dropdown-options">
                                        <div class="dropdown-option" data-value="english">English</div>
                                        <div class="dropdown-option" data-value="hindi">Hindi</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="settings-tab-content" id="equalizer-content">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                <h3 style="margin: 0; border-bottom: none; padding-bottom: 0;">Equalizer</h3>
                                <input type="checkbox" id="equalizerToggle" class="toggle-switch" checked>
                            </div>
                            <div class="equalizer-controls">
                                <div class="equalizer-presets">
                                    <div class="custom-dropdown" id="equalizerPresets">
                                        <div class="dropdown-selected">Flat</div>
                                        <div class="dropdown-options">
                                            <div class="dropdown-option" data-value="flat">Flat</div>
                                            <div class="dropdown-option" data-value="rock">Rock</div>
                                            <div class="dropdown-option" data-value="pop">Pop</div>
                                            <div class="dropdown-option" data-value="jazz">Jazz</div>
                                            <div class="dropdown-option" data-value="classical">Classical</div>
                                            <div class="dropdown-option" data-value="electronic">Electronic</div>
                                            <div class="dropdown-option" data-value="bass-boost">Bass Boost</div>
                                            <div class="dropdown-option" data-value="vocal">Vocal</div>
                                        </div>
                                    </div>
                                    <button id="resetEqualizer" class="reset-btn">Reset</button>
                                </div>
                                <div class="equalizer-sliders" id="equalizerSliders">
                                    <svg class="eq-graph" id="eqGraph" viewBox="0 0 100 100" preserveAspectRatio="none">
                                        <defs>
                                            <linearGradient id="eqGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                                <stop offset="0%" stop-color="rgba(136, 136, 136, 0.4)"/>
                                                <stop offset="50%" stop-color="rgba(136, 136, 136, 0.2)"/>
                                                <stop offset="100%" stop-color="rgba(136, 136, 136, 0.4)"/>
                                            </linearGradient>
                                            <linearGradient id="eqGradientLight" x1="0%" y1="0%" x2="0%" y2="100%">
                                                <stop offset="0%" stop-color="rgba(102, 102, 102, 0.4)"/>
                                                <stop offset="50%" stop-color="rgba(102, 102, 102, 0.2)"/>
                                                <stop offset="100%" stop-color="rgba(102, 102, 102, 0.4)"/>
                                            </linearGradient>
                                        </defs>
                                        <path id="eqPath" stroke="#888" stroke-width="0.5" fill="url(#eqGradient)"/>
                                    </svg>
                                    <div class="eq-slider-row">
                                        <label class="eq-label">32Hz</label>
                                        <input type="range" class="eq-slider" data-freq="32" min="-12" max="12" value="0" step="0.5">
                                        <span class="eq-value">0dB</span>
                                    </div>
                                    <div class="eq-slider-row">
                                        <label class="eq-label">64Hz</label>
                                        <input type="range" class="eq-slider" data-freq="64" min="-12" max="12" value="0" step="0.5">
                                        <span class="eq-value">0dB</span>
                                    </div>
                                    <div class="eq-slider-row">
                                        <label class="eq-label">125Hz</label>
                                        <input type="range" class="eq-slider" data-freq="125" min="-12" max="12" value="0" step="0.5">
                                        <span class="eq-value">0dB</span>
                                    </div>
                                    <div class="eq-slider-row">
                                        <label class="eq-label">250Hz</label>
                                        <input type="range" class="eq-slider" data-freq="250" min="-12" max="12" value="0" step="0.5">
                                        <span class="eq-value">0dB</span>
                                    </div>
                                    <div class="eq-slider-row">
                                        <label class="eq-label">500Hz</label>
                                        <input type="range" class="eq-slider" data-freq="500" min="-12" max="12" value="0" step="0.5">
                                        <span class="eq-value">0dB</span>
                                    </div>
                                    <div class="eq-slider-row">
                                        <label class="eq-label">1kHz</label>
                                        <input type="range" class="eq-slider" data-freq="1000" min="-12" max="12" value="0" step="0.5">
                                        <span class="eq-value">0dB</span>
                                    </div>
                                    <div class="eq-slider-row">
                                        <label class="eq-label">2kHz</label>
                                        <input type="range" class="eq-slider" data-freq="2000" min="-12" max="12" value="0" step="0.5">
                                        <span class="eq-value">0dB</span>
                                    </div>
                                    <div class="eq-slider-row">
                                        <label class="eq-label">4kHz</label>
                                        <input type="range" class="eq-slider" data-freq="4000" min="-12" max="12" value="0" step="0.5">
                                        <span class="eq-value">0dB</span>
                                    </div>
                                    <div class="eq-slider-row">
                                        <label class="eq-label">8kHz</label>
                                        <input type="range" class="eq-slider" data-freq="8000" min="-12" max="12" value="0" step="0.5">
                                        <span class="eq-value">0dB</span>
                                    </div>
                                    <div class="eq-slider-row">
                                        <label class="eq-label">10kHz</label>
                                        <input type="range" class="eq-slider" data-freq="10000" min="-12" max="12" value="0" step="0.5">
                                        <span class="eq-value">0dB</span>
                                    </div>
                                    <div class="eq-slider-row">
                                        <label class="eq-label">12kHz</label>
                                        <input type="range" class="eq-slider" data-freq="12000" min="-12" max="12" value="0" step="0.5">
                                        <span class="eq-value">0dB</span>
                                    </div>
                                    <div class="eq-slider-row">
                                        <label class="eq-label">14kHz</label>
                                        <input type="range" class="eq-slider" data-freq="14000" min="-12" max="12" value="0" step="0.5">
                                        <span class="eq-value">0dB</span>
                                    </div>
                                    <div class="eq-slider-row">
                                        <label class="eq-label">16kHz</label>
                                        <input type="range" class="eq-slider" data-freq="16000" min="-12" max="12" value="0" step="0.5">
                                        <span class="eq-value">0dB</span>
                                    </div>
                                    <div class="eq-slider-row">
                                        <label class="eq-label">18kHz</label>
                                        <input type="range" class="eq-slider" data-freq="18000" min="-12" max="12" value="0" step="0.5">
                                        <span class="eq-value">0dB</span>
                                    </div>
                                    <div class="eq-slider-row">
                                        <label class="eq-label">20kHz</label>
                                        <input type="range" class="eq-slider" data-freq="20000" min="-12" max="12" value="0" step="0.5">
                                        <span class="eq-value">0dB</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="settings-tab-content" id="appearance-content">
                            <h3>Appearance</h3>
                            <p>Theme and appearance settings will go here.</p>
                        </div>
                        <div class="settings-tab-content" id="features-content">
                            <h3>Features and Use</h3>
                            <p>Feature configuration and usage settings will go here.</p>
                        </div>
                        <div class="settings-tab-content" id="about-content">
                            <h3>About</h3>
                            <p>Application information and credits will go here.</p>
                        </div>
                    </div>
                </div>
                <div class="playlist-details-panel" id="playlistDetailsPanel" style="display: none;">
                    <img src="icons/edit.png" class="playlist-bg-edit-icon" id="playlistBgEditIcon" title="Change background image">
                    <div class="playlist-info">
                        <div class="playlist-cover" id="playlistCover">
                            <img src="icons/playlist.png" class="playlist-cover-img">
                            <div class="playlist-cover-overlay">
                                <img src="icons/edit.png" class="playlist-edit-icon">
                            </div>
                        </div>
                        <div class="playlist-meta">
                            <div class="playlist-title-container">
                                <h2 class="playlist-title" id="playlistTitle">Playlist Name</h2>
                                <img src="icons/edit.png" class="playlist-edit-name-icon" id="playlistEditIcon" title="Edit playlist name">
                                <input type="text" class="playlist-title-input" id="playlistTitleInput" style="display: none;">
                            </div>
                            <p class="playlist-stats" id="playlistStats">0 songs</p>
                            <p class="playlist-description" id="playlistDescription">No description</p>
                        </div>
                    </div>
                </div>
                <div class="music-container" id="musicContainer">
                    <div class="music-header">
                        <div class="header-number">#</div>
                        <div class="header-cover"></div>
                        <div class="header-title">Title</div>
                        <div class="header-rating">Rating</div>
                        <div class="header-badge">
                            <button class="header-btn" id="sortBtn" title="Sort Options"><img src="icons/shortby.png"></button>
                            <div class="sort-menu" id="sortMenu">
                                <div class="sort-option" data-sort="title">Sort by Title</div>
                                <div class="sort-option" data-sort="artist">Sort by Artist</div>
                                <div class="sort-option" data-sort="rating">Sort by Rating</div>
                                <div class="sort-option" data-sort="recent">Recently Added</div>
                            </div>
                        </div>
                    </div>
                    <div class="music-list" id="musicList">
                        <div id="songs"></div>
                    </div>
                </div>
                
                <div class="download-panel" id="downloadPanel" style="display: none;">
                    <iframe id="spotdlFrame" src="" style="width: 100%; height: 100%; border: none; display: none;"></iframe>
                    <div class="download-loading" id="downloadLoading" style="display: flex; align-items: center; justify-content: center; height: 100%; flex-direction: column;">
                        <p>Starting SpotDL server...</p>
                        <div style="margin-top: 10px; font-size: 12px; color: #666;">This may take a few moments</div>
                    </div>
                </div>
                
                <div class="context-menu" id="contextMenu">
                    <div class="menu-item" id="addMusic">Add Music</div>
                    <div class="menu-item" id="addVideo">Add Video</div>
                    <div class="menu-item" id="addLyrics">Add Lyrics</div>
                    <div class="menu-item" id="viewFolder">View Folder</div>
                </div>
                
                <div class="context-menu" id="songContextMenu">
                    <div class="menu-item submenu-parent" id="addToPlaylist">
                        <img src="icons/add-to-playlist.png" class="menu-icon">Add to Playlist
                        <img src="icons/right-arrow.png" class="submenu-arrow">
                        <div class="submenu" id="playlistSubmenu"></div>
                    </div>
                    <div class="menu-item" id="addToQueue"><img src="icons/queue.png" class="menu-icon">Add to Queue</div>
                    <div class="menu-item" id="enableSelection"><img src="icons/ticked.png" class="menu-icon">Select Multiple</div>
                    <div class="menu-item" id="removeFromPlaylist"><img src="icons/delete.png" class="menu-icon">Remove from Playlist</div>
                    <div class="menu-item" id="removeLyrics"><img src="icons/remove-lyrics.png" class="menu-icon">Remove Lyrics</div>
                    <div class="menu-item" id="removeVideo"><img src="icons/remove-video.png" class="menu-icon">Remove Video</div>
                    <div class="menu-item" id="viewInFolder"><img src="icons/folder2.png" class="menu-icon">View in Folder</div>
                    <div class="menu-item" id="deleteSong"><img src="icons/delete.png" class="menu-icon">Delete Song</div>
                </div>
                
                <div class="context-menu" id="lyricsContextMenu">
                    <div class="menu-item" id="pasteLyrics">Paste Synced Lyrics</div>
                </div>
                
                <div class="context-menu" id="playlistContextMenu">
                    <div class="menu-item" id="editPlaylist">Edit Playlist</div>
                    <div class="menu-item submenu-parent" id="mergePlaylist">
                        Merge With
                        <img src="icons/right-arrow.png" class="submenu-arrow">
                        <div class="submenu" id="mergeSubmenu"></div>
                    </div>
                    <div class="menu-item" id="pinPlaylist">Pin Playlist</div>
                    <div class="menu-item" id="deletePlaylist">Delete Playlist</div>
                </div>
                
                <input type="file" id="musicFileInput" multiple accept="audio/*" style="display: none;">
                <input type="file" id="videoFileInput" multiple accept="video/*" style="display: none;">
                <input type="file" id="lyricsFileInput" multiple accept=".lrc" style="display: none;">
            </div>
            
            <div class="resizer" id="resizer"></div>
            
            <div class="right-panel" id="rightPanel">
                <div class="details-panel">
                    <div class="album-cover" id="albumCover">
                        <div class="cover-placeholder">🎵</div>
                    </div>
                    <div class="video-player" id="videoPlayer" style="display: none;">
                        <video id="videoElement" preload="metadata">
                            Your browser does not support the video tag.
                        </video>
                    </div>
                    <div class="song-details">
                        <h3 id="detailTitle">Select a Song</h3>
                        <p id="detailArtist">Unknown Artist</p>
                        <div class="song-info">
                            <span id="detailDuration">--:--</span>
                            <span id="detailFormat">--</span>
                        </div>
                    </div>
                </div>
                
                <div class="lyrics-header">
                    <div class="lyrics-controls" style="margin-left: auto;">
                        <button id="lyricsToggleBtn" class="theme-btn active" title="Toggle Lyrics"><img src="icons/lyrics.png"></button>
                        <button id="lyricsFontBtn" class="theme-btn" title="Lyrics Font Settings" style="display: none;"><img src="icons/font.png"></button>
                        <button id="offsetToggleBtn" class="theme-btn" title="Adjust Lyrics Timing"><img src="icons/clock.png"></button>
                        <button id="videoBtn" class="theme-btn" title="Toggle Video Player"><img src="icons/video.png"></button>
                        <button id="floatLyricsBtn" class="float-btn" title="Open Floating Lyrics Window"><img src="icons/floating.png"></button>
                    </div>
                </div>
                <div id="lyrics" class="lyrics"></div>

                <div class="lyrics-timing-controls" id="lyricsTimingControls" style="display: none;">
                    <button class="timing-btn" id="timingBackward">-500ms</button>
                    <span class="timing-offset" id="timingOffset">Offset: 0ms</span>
                    <button class="timing-btn" id="timingForward">+500ms</button>
                    <button class="timing-btn" id="timingSave" style="background: #27ae60;">✓</button>
                </div>
                
                <div class="lyrics-font-controls" id="lyricsFontControls" style="display: none;">
                    <button class="timing-btn" id="fontDecrease">-</button>
                    <span class="timing-offset" id="fontSizeDisplay">Size: 16px</span>
                    <button class="timing-btn" id="fontIncrease">+</button>
                    <button class="timing-btn" id="fontSave" style="background: #27ae60;">✓</button>
                </div>
            </div>
        </div>
        
        <div class="bottom-controls">
            <div class="progress-container">
                <div class="progress-bar" id="progressBar" title="Seek to position">
                    <div class="progress-fill" id="progressFill"></div>
                    <div class="progress-handle" id="progressHandle"></div>
                </div>
            </div>
            
            <div class="controls-row">
                <div class="player-controls">
                    <button id="shuffleBtn" class="mode-btn" title="Shuffle"><img src="icons/shuffle.png"></button>
                    <button id="prevBtn" title="Previous Song"><img src="icons/previous.png"></button>
                    <button id="playPauseBtn" title="Play/Pause"><img src="icons/play.png"></button>
                    <button id="nextBtn" title="Next Song"><img src="icons/next.png"></button>
                    <button id="repeatBtn" class="mode-btn" title="Repeat Mode"><img src="icons/repeat_all.png"></button>
                    <div class="star-rating-current" id="starRatingCurrent"></div>
                </div>
                
                <div class="time-display">
                    <span id="time">00:00 / 00:00</span>
                    <div class="signature">by Vishal</div>
                </div>
                
                <div class="volume-container">
                    <div class="volume-icon"><img src="icons/100.png" id="volumeIcon"></div>
                    <div class="volume-bar" id="volumeBar" title="Adjust volume (scroll wheel supported)">
                        <div class="volume-fill" id="volumeFill"></div>
                        <div class="volume-handle" id="volumeHandle"></div>
                    </div>
                    <span id="volumePercent">100%</span>
                </div>
            </div>
        </div>
        
        <audio id="audio"></audio>
    </div>


    <script src="app.js"></script>
</body>
</html>